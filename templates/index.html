{% extends "base.html" %}

{% block header %}
    <link rel="stylesheet" href="/static/css/landingPage.css">
    <script>
		var userID = "{{ userID }}"
	</script>

{% endblock %}
{% block content %}
<body>
	<div class="landingScreen verticalCenterIndex col-xs-12 col-sm-12 col-lg-12">
		<!-- <button class="btn btn-login">LOGIN</button> !-->
		<div class="tryDemo">
			<p>Try Demos</p>
			<span class="glyphicon glyphicon glyphicon-menu-down" aria-hidden="true"></span>
		</div>
		<div class="landingScreenContainer">
			<h2>EduSaga</h2>
			<p>Providing interactive speaking activities and immediate feedback to learners through speech recognition</p>
			<a data-scroll href="#signup"><button class="btn btn-signup">SIGN UP</button></a>
		</div>
		<div class="landingScreenVideo">
			<div id="player">
			<!--
			<iframe class="videoTrailer" width="100%" height="315" src="https://www.youtube.com/embed/nQeKi-2JOnA" frameborder="0" allowfullscreen></iframe>
			!-->
		</div>
		</div>
	</div>

	<!-- Demo Div !-->
	<!--
	<div class="demoScreen verticalCenterIndex col-xs-12 col-sm-12 col-lg-12">
		<div id="app" class=" demoContainer col-xs-12 col-sm-12 col-lg-12"></div>
		 <script>
	    	var activity = "{{ activityName }}"
	    	var teacher = "{{ teacher }}"
    	</script>

			<div class="scenarioWindow hidden">
				<div class="roboWrapper">
				</div>
				<div class="scenarioTextWrapper">
					<h3 class="scenarioHeader"></h3>
					<p class="scenarioText"></p>
					<button class="btn btn-success btn-confirm">Got it!</button>
				</div>
			</div>
	</div>
	!-->


	<!-- Features Div !-->

	<div class="featuresScreen col-xs-12 col-sm-12 col-lg-12">
		<h3>Speaking Episodes!</h3>
		<div class ="feature">
			<div class="featureImage">
				<a href="public/publicDemo2" target="_blank"><img src="https://s3.amazonaws.com/edusaga/assets/images/index/demoTina.png"></a>
			</div>
			<div class="featureText">
				<div class="textWrapper">
					<h3>Ordering at a Fast Food Restaurant</h3>
					<p><span>Scenario:</span> Ask about what the restaurant has, the price of different foods, and finally order something at this fast food restaurant scenario.</p>
					<p><span>Key Phrases:</span> 你有没有...? 几块钱?, 来一个／我要一个</p>
				</div>
				<div class="buttonWrapper">
					<a href="public/publicDemo2?p={{ userID }}" target="_blank" class="btn btn-tryDemo">Start</a>
				</div>
			</div>
		</div>
		<div class ="feature">
			<div class="featureImage">
				<a href="public/publicDemo" target="_blank"><img src="https://s3.amazonaws.com/edusaga/assets/images/index/demoDavid.png"></a>
			</div>
			<div class="featureText">
				<div class="textWrapper">
					<h3>Meeting a New Friend</h3>
					<p><span>Scenario:</span> In this scene, you meet David, someone who you met at the airport and who will be attending a Chinese langauge program with you. You want to learn as much about him as possible.</p>
					<p><span>Key Phrases:</span> 你是哪里人, 你几岁, 你属什么, 你喜欢...? </p>
				</div>
				<div class="buttonWrapper">
					<a href="public/publicDemo?p={{ userID }}" target="_blank" class="btn btn-tryDemo">Start</a>
				</div>
			</diV>
		</div>
		<div class ="feature">
			<div class="featureImage">
				<a href="public/publicDemo3" target="_blank"><img src="https://s3.amazonaws.com/edusaga/assets/images/index/demoLinda.png"></a>
			</div>
			<div class="featureText">
				<div class="textWrapper">
					<h3>Asking about Family Members</h3>
					<p><span>Scenario:</span> You and Linda have just met and you're curious to learn more about her family.</p>
					<p><span>Key Phrases:</span> 你家有几口人?, 你的妈妈是哪里人?, 你的爸爸几岁?</p>
				</div>
				<div class="buttonWrapper">
					<a href="public/publicDemo3?p={{ userID }}" target="_blank" class="btn btn-tryDemo">Start</a>
				</div>
			</div>
		</div>

		<a href="/public/home?p={{ userID }}"><button class="btn btn-signup-lg">SEE MORE EPISODES</button></a>
	</div>

	<!-- Activities Div linking to specific demo examples !-->
	<!--
	<div class="activityScreen col-xs-12 col-sm-12 col-lg-12">
		<div class="activityWrapper">
			<h2>Ordering at a Restaurant</h2>
			<div class="activityContent">
				<div class="textButtonWrapper">
					<p>Ordering food at a restaurant might require asking </p>
					<button class="btn btn-info">Click to Open</button>
				</div>
			</div>
			<div class="activityImageWrapper">
				<img src="static/images/davidDefault.png">
			</div>
		</div>
	</div>
	!-->

	<!-- Testimonials !-->
	<!--
	<div class="testimonyScreen verticalCenter col-xs-12 col-sm-12 col-lg-12">
		<div class="testimonyWrapper">
			<h2>Teacher Testimonials</h2>
			<div class="testimony testimonyLeft">
				<div class="portrait"></div>
				<p class="comment">EduSaga is so much better than sliced bread that I don't even buy sliced bread anyomre. Now I only eat bagels</p>
				<div class="author">
					<p class="name">Who knows</p>
					<p class="location">Cherry Hill High School East</p>
				</div>
			</div>
			<div class="testimony testimonyRight">
				<div class="portrait"></div>
				<p class="comment">I'm too lazy to wrap this text around the ellipse headshot right now btu that is what should happen in CSS</p>
				<p class="author">Cool Teacher 123</p>
			</div>
		</div>
	</div>
	!-->

	<!-- Sign up Page !-->
	<div class="signupScreen col-xs-12 col-sm-12 col-lg-12">
		<div class="signupWrapper">
			<h3>SIGN UP <span> TO HEAR MORE. </span></h3>
			<div class="signupText">
				<p>We're not quite ready yet, but we'll be launching in late September 2016. If you're interested in becoming an early beta user of EduSaga or staying updated on our progress, please subscribe.</p>
			</div>
			<form class="form-inline" action="//edusaga.us12.list-manage.com/subscribe/post?u=c9886f4cfd614ff3de96ca574&amp;id=b0c654a125" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate> 
				<div class="form-group" id="mc_embed_signup_scroll">  
					<input type="email" class="form-control" id="signup" placeholder="learnlanguages@example.com" value="" name="EMAIL" class="email" id="mce-EMAIL" required>  
				    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_c9886f4cfd614ff3de96ca574_b0c654a125" tabindex="-1" value=""></div>
				</div>
				<button type="submit" class="btn btn-default" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">Subscribe</button>
            </form>
            <div class="contact">
            	<p>Or contact us at: <a href="mailto:info@edusaga.com"><u>info@edusaga.com</u></a> for more info!</p>
            </div>
		</div>
	</div>
	<div class="footer">
	</div>

	<!-- Tracking and YouTube API scripts !--> 
	<script>
		smoothScroll.init();
		console.log(userID);
		// Track user visited page
		var formatDateForLog = function() {
			var d = new Date();
			var dateToLog = d.getFullYear() + '-' + (d.getMonth()+1) + '-' + d.getDate() + ' ' + d.getHours() + ':' + d.getMinutes();
			return dateToLog;
		}

		console.log(formatDateForLog());

		var currentLogData = {
			"userID" : userID
		}

		currentLogData.time = formatDateForLog();
		currentLogData.eventType = "Visited Page";
        var logEvent = JSON.stringify(currentLogData);

		$.ajax({
			url: "/logVisitorEvents",
			type: "POST",
			data: logEvent, 
			dataType: "json"
		});	

      // 2. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          videoId: 'nQeKi-2JOnA',
          events: {
            'onStateChange': onPlayerStateChange
          }
        });
      }

      // 4. The API will call this function when the video player is ready.
      /*
      function onPlayerReady(event) {
      }
      */

      // 5. The API calls this function when the player's state changes.
      var playedAlready = false;
      var playedTime = 0;

      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING && !playedAlready) {
        	currentLogData.eventType = "Played Video";
        	var logEvent = JSON.stringify(currentLogData);
			$.ajax({
				url: "/logVisitorEvents",
				type: "POST",
				data: logEvent, 
				dataType: "json"
			});
          console.log("Played video for first time");
          playedAlready = true;
        }
        if (event.data == YT.PlayerState.PAUSED || YT.PlayerState.ENDED) {
        	currentLogData.eventType = "Stopped video at " + player.getCurrentTime();
			var logEvent = JSON.stringify(currentLogData);
			$.ajax({
				url: "/logVisitorEvents",
				type: "POST",
				data: logEvent, 
				dataType: "json"
			});
          console.log(player.getCurrentTime());
        }
      }
      function stopVideo() {
        player.stopVideo();
      }

	</script>

	<script src="static/js/viewHelper.js"></script>
    <script src="/static/js/bundle_questionAsker.js"></script>
	<!-- What to do if opened in safari or firefox !-->
	<!--
	<script>
		try {
			var SpeechRecognition = webkitSpeechRecognition;
			var SpeechGrammarList = SpeechGrammarList || webkitSpeechGrammarList;
			var SpeechRecognitionEvent = SpeechRecognitionEvent || webkitSpeechRecognitionEvent;
		} catch(err) {
			var scenarioWindow = $(".scenarioWindow");
			var roboWrapper = $(".roboWrapper");
			scenarioTextWrapper = $(".scenarioTextWrapper");
			scenarioWindow.removeClass("hidden");
			// roboWrapper.html('<img src="' + IMAGE_BASE_PATH + 'robo/roboDefault.png">');
			scenarioTextWrapper.children(".scenarioHeader").html("Sorry!");
			scenarioTextWrapper.children(".scenarioText").html("Sorry, EduSaga currently only supports Google Chrome on desktop or laptops (no mobile). Please switch over to Google Chrome for speech recognition access and to try the demo!");
			scenarioTextWrapper.children(".btn-confirm").hide();
		}
	</script>
	!-->


</body>
{% endblock %}
